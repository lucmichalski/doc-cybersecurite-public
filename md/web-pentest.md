# Pentest Web

## General

Plusieurs étapes pour le pentest web:
* Se mettre d'accord avec le propriétaire du site pour savoir ce qu'on fait ou pas
* Récupération d'information
* Découverte d'URL
* Scanner automatique
* Test manuel
* Rapport

L'analyse statique est l'analyse du code, l'analyse dynamique est l'analyse de l'éxécution du site.

En général le but de l'intrusion étant d'accéder à du contenu, les attaques se concentrent plutôt côté serveur puique c'est là que sont les contenus sensibles, ce qui expose PHP, NodeJS, JEE ou ASP.Net. Mais la tendance actuelle est de mettre de plus en plus d'éléments côté client, ce qui rend de plus en plus intéressante l'analyse côté client qui en général correspond à beaucoup d'analyse de code statique JS, ou l'utilisation du debugger du navigateur.

### Récupération d'information
Il faut déterminer en premier lieu les technos du site. Plusieurs possibilité
* https://builtwith.com/ un excellent site pour explorer les technos présentes sur un domaine
* Chercher les extensions des fichiers sources
* Intercepter une requête et regarder le nom du cookies

### Découverte d'URL
Le plus important. Les possibilités sont:
* cliquer sur toutes les fonctionnalités du site avec Burp puis aller dans la section `sitemap` de Burp
* utiliser un google dork. `site:domaine.com`, une liste de page va s'afficher
* utiliser `Dirb` pour bruteforcer l'arborescence ou `DirBuster` de OWASP

On peut trouver des config, des logs, des decription de web services, une section admin ....

### Scanner automatique
Le but est de trouver des vulnérabilités à l'aide notamment des scanners dédiés.
* Sous Burp clic droit sur le site dans le sitemap et sélectionner `Actively scan this host`
* Lancer Acunetix (Windows) avec le scanning mode intensive, et en sélectionnant Start HTTP sniffer et Fetch default index files dans les options de Crawling

Attention si des parties su site nécessite une authentification, il vaut mieux être authentifié.

### Test manuel
* Certaines vulnérabilités, notamment les logiques fonctionnelles ne sont pas détectés par le scan auto. C'est l'objet du test manuel à l'inverse de tout ce qui est XSS, SQLI ... plutôt pour le scan auto
* De même le scan auto retourne des faux positifs qu'il faut éliminer.

Pour étudier le fonctionnel, il faut se donner des scénarii et cas d'utilisation et observer ce qui se passe au niveau des requêtes avec Burp pour trouver une variable à détourner par exemple.

Une page statique ne va pas offrir beaucoup de problème de sécurité. Un scanner de vulnérabilité comme `nikto` va être plus performant sur une page statique et moins sur une dynamique. Or c'est en jouant avec une page dyamique que l'on peut trouver des points d'entrées pour une injection.

* La première étape est de jouer avec l'appli pour en comprendre le fonctionnel
* Ensuite, observer les requête avec Burp. Une fois que la requête est sous Burp, c'est qu'elle a passé les traitements JS de la page cliente

Il y'a en général trois possibilités de points d'entrées que l'on peut observer sur les requêtes avec Birp:
* **URL** : la requête GET passe ses paramètres dans l'URL à la différence de POST 
* **Cookies** : les cookies permettent de faire passer des data
* **Body** : Dans le corps de la requête, on peut toruver les paramètres si la requête est une POST (à la différence du GET) 

### Rapport
Le rapport se compose des éléments suivants;
* Vulnérabilité : SQLI, XSS ....
* Severité : High / Medium / Low
* Description : Description plus détaillé
* Impact : Conséquences de l'exploitation de la vulnérabilité
* URLs affectées: lister toutes les URL et paramètres concernés
* Recommendation : Corriger le problème

---

## Angular
https://nvisium.com/blog/2019/01/10/angular-for-pentesters-part-1.html
https://nvisium.com/blog/2019/01/17/angular-for-pentesters-part-2.html

https://security.stackexchange.com/questions/143480/what-is-best-way-to-pentest-an-angularjs-web-app-with-a-rest-backend

https://security.stackexchange.com/questions/117129/how-to-pentest-an-angularjs-based-spa-single-page-application

## React
https://medium.com/dailyjs/exploiting-script-injection-flaws-in-reactjs-883fb1fe36c1

## Tools
https://www.kitploit.com/2020/05/web-hackers-weapons-collection-of-cool.html?m=1
https://github.com/enaqx/awesome-pentest







